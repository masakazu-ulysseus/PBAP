# アセンブリ番号抽出（特徴量マッチング）PoC 結果レポート

## 実施内容
ユーザーが指定した「数字（文字）」の特徴（色、サイズ）を分析し、画像全体から類似した文字の塊を検出し、グルーピングするスクリプト `poc/extract_numbers.py` を作成・実行しました。

## テスト条件
- **対象画像**: `パンターG型_001.jpg`
- **テンプレート（シミュレーション）**:
  - 自動検出された文字領域: `(170, 2037, 16, 39)`
  - 分析結果:
    - 文字色: 黒 (Black)
    - 平均文字高さ: 37.0 px
    - 平均文字面積: 592.0 px

## 検出結果
- **検出数**: 142個の領域
- **内容**: 画像内の「文字らしい」黒い塊が多数検出されました。
- **グルーピング**: 近接する文字（例: "3"と"1"）は1つの領域としてまとめられています。

## 評価
このアプローチ（Direct Number Matching）は、枠線に依存せずに数字そのものを検出できるため、非常に汎用性が高いです。
ただし、検出数が142個と多いため、**「アセンブリ番号以外の文字（注釈など）」も検出されている** 可能性があります。

## 今後の改善点
1. **フィルタリング強化**:
   - 数字以外の文字（アルファベットや記号）を除外するため、OCRを追加で適用して「数字のみ」を残す処理が有効かもしれません。
2. **ユーザー確認UI**:
   - 多数の候補から「正解」を効率よく選べるUI（例: 信頼度順に表示、一括選択など）が必要です。

## 結論
**「枠検出」から「文字特徴マッチング」への移行は成功**しました。
このロジックをベースに、管理ツールへの統合を進めることを推奨します。

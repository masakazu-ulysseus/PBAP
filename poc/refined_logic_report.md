# アセンブリ番号領域検出 PoC - アルゴリズム改善結果レポート

## 実施内容
ユーザーフィードバックに基づき、以下の変更を行いました。
1. **アスペクト比フィルタ削除**: 縦長の枠も許容
2. **領域推定ロジック変更**: 枠の「左上」だけでなく「周囲全体（マージン100px）」を含める
3. **マージ処理削除**: 検出された枠をそのまま採用
4. **OCR無効化**: 純粋なルールベースでの評価

## 検出結果比較

| ファイル | 正解数 | 改善前 (サイズのみ) | **今回 (改善版)** | 評価 |
|----------|--------|---------------------|-------------------|------|
| 001.jpg | 2 | **2** (100%) | 4 (200%) | 誤検出増 (+2) |
| 002.jpg | 2 | 3 | 3 | 変化なし |
| 003.jpg | 3 | 4 | 6 | 誤検出増 (+2) |
| 004.jpg | 2 | 3 | 4 | 誤検出増 (+1) |
| 005.jpg | 6 | 5 (83%) | **6** (100%) | ✅ **見逃しゼロ！** |

## 分析
1. **見逃しの解消**: 難易度の高かった `005.jpg` で、正解の6個すべてを検出できました。アスペクト比フィルタの削除が効いていると考えられます。
2. **誤検出の増加**: フィルタを緩めたことで、部品リスト以外の枠（図面枠や注釈枠など）も検出されるようになりました。
   - 001.jpg: 正解2個に対し4個検出（余分な2個が含まれる）

## 結論
**「見逃し（False Negative）をなくす」という点では大成功**です。
誤検出（False Positive）は増えましたが、**「半自動フロー（人間が不要な枠を消す）」** を前提とすれば、見逃しがあるよりマシ（正解を探して枠を作る手間より、消す手間の方が少ない）と言えます。

## 推奨
このロジック（高Recall・低Precision）を採用し、管理ツールのUIで「不要な枠をワンクリックで削除できる」機能を充実させるのが現実的です。

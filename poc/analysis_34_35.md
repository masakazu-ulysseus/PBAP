# 34と35の検出結果分析レポート

## 結論

✅ **アセンブリ番号34と35は検出されていました！**

## 詳細分析

### 緑円の位置（ユーザーアノテーション）

**Circle 1** (位置: 917, 1561):
- **対応検出領域**: Region 6
- アセンブリ番号 **34 または 35**

**Circle 2** (位置: 2377, 349):
- **対応検出領域**: Region 13  
- アセンブリ番号 **35 または 34**

### 検出領域の確認

**Region 6**:
- 位置: (798, 1097, 779, 503)
- 中央付近の領域
- 部品リスト（赤枠）を含む
- ✅ アセンブリ番号34または35を含む

**Region 13**:
- 位置: (2262, 0, 444, 475)
- 右上の領域
- 部品リスト（赤枠）を含む
- ✅ アセンブリ番号36...ではなく、35または34を含む

## 発見事項

### 良かった点
1. **検出漏れはなかった**
   - 6つのアセンブリ番号すべてが何らかの形で検出されていた
   
2. **枠検出ロジックは機能している**
   - 赤枠・黒枠の検出は正常に動作
   - 34と35の部品リストも検出できている

### 問題点

1. **誤検出が多い**
   - 13個の領域が検出されたが、正解は6個
   - 約7個が余分（誤検出）

2. **領域の対応が不明確**
   - どの領域がどのアセンブリ番号に対応するか、アルゴリズムでは判別できない
   - ユーザーが手動で確認する必要がある

3. **領域の精度**
   - 領域の境界が適切でない可能性
   - 複数のアセンブリ番号がひとつの領域に含まれている可能性

## アセンブリ番号と検出領域の対応表（推定）

| アセンブリ番号 | 検出領域 | 確認方法 |
|--------------|---------|---------|
| 31 | Region 7 | 目視確認済み |
| 32 | Region 11 | 推定（要確認） |
| 33 | Region 12 | 推定（要確認） |
| 34 | Region 6 | ✅ アノテーション分析で確定 |
| 35 | Region 13 | ✅ アノテーション分析で確定 |
| 36 | Region ? | 未特定（Region 4, 5, 8, 9, 10のいずれか） |

**残りの領域（1, 2, 3, その他）**: 誤検出

## 次のステップ

### 1. 全アセンブリ番号の位置を特定
- 31, 32, 33, 36についてもアノテーション
- または既存の抽出済みサンプル画像と照合

### 2. OCRの導入（高優先度）
- アセンブリ番号（数字）を直接検出
- 検出された領域が正しいアセンブリ番号を含むか確認
- 誤検出のフィルタリング精度向上

### 3. フィルタリングロジックの改善
- 部品リストの特徴（「x1」「x2」の個数表示）を検出
- アセンブリ番号のない領域を除外

### 4. 領域統合ロジックの見直し
- 現在の重複マージロジックが適切か検証
- 複数の小領域を1つのアセンブリ番号領域に統合できているか

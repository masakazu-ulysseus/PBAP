# アセンブリ番号領域検出 PoC - OCR統合結果レポート

## 実施内容
Tesseract OCRを導入し、検出された枠内の左上領域から数字（1〜200）を検出するフィルタリングを追加しました。
**OCR設定**: 画像2倍拡大、適応的二値化、PSM 6（単一ブロック）

## 検出結果比較

| ファイル | 正解数 | ルールベースのみ | OCR追加後 | 評価 |
|----------|--------|------------------|-----------|------|
| 001.jpg | 2 | **2** (100%) | 1 (50%) | ❌ 悪化（1つ見逃し） |
| 002.jpg | 2 | 3 | 3 | 変化なし（誤検出残る） |
| 003.jpg | 3 | 4 | 4 | 変化なし（誤検出残る） |
| 004.jpg | 2 | 3 | 3 | 変化なし（誤検出残る） |
| 005.jpg | 6 | 5 | 5 | 変化なし |

## 分析
1. **精度向上せず**: OCRを追加しても、誤検出（002, 003, 004）は減りませんでした。
   - **原因**: 誤検出される領域（ノイズや他の文字）も、OCRによって「1」「7」「4」などの数字として誤認識されてしまっています。
2. **見逃しの発生**: 001.jpgで、ルールベースでは検出できていた正解領域が、OCRによって除外されてしまいました。
   - **原因**: 正しいアセンブリ番号をOCRが読み取れなかったため。

## 結論
**OCRの導入は、現時点では精度向上に寄与していません。**
むしろ、処理が重くなり、セットアップが複雑になる（Tesseract依存）上に、一部の正解を見逃すリスクが増えました。

## 推奨方針
**ルールベース（サイズ・面積フィルタ）のみ** の構成に戻すことを強く推奨します。
- **理由1**: 001.jpgで100%の検出率を達成している（OCRは失敗）。
- **理由2**: 誤検出の数は変わらない。
- **理由3**: 依存ライブラリが少なく、環境構築が容易。

「半自動フロー（人間が微調整）」を前提とするなら、見逃しが少ない（Recallが高い）ルールベースの方が適しています。
